(()=>{"use strict";var t={165:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Color=e.Size=e.Position=void 0;var o=i(n(169)),r=function(){function t(){this._invalidated=!1}return Object.defineProperty(t.prototype,"invalidated",{get:function(){return this._invalidated},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this._invalidated=!0},t}();e.default=r;e.Position=function(t,e){this.left=t,this.top=e};e.Size=function(t,e){this.width=t,this.height=e};var s=function(){function t(t,e,n,i){void 0===i&&(i=1),this._r=o.default.fitIn(t,0,255),this._g=o.default.fitIn(e,0,255),this._b=o.default.fitIn(n,0,255),this._a=o.default.fitIn(i,0,1)}return Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=o.default.fitIn(t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._g},set:function(t){this._g=o.default.fitIn(t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(t){this._b=o.default.fitIn(t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(t){this._a=o.default.fitIn(t,0,1)},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"rgba("+this._r+", "+this._g+", "+this._b+", "+this._a+")"},t}();e.Color=s},246:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TextAlign=void 0;var l,c=u(n(603)),d=a(n(165)),p=function(t){function e(e,n,i,o,r,s,a,u){var l=t.call(this)||this;return l.text=e,l.font=n,l.pxSize=i,l.color=o,l.position=r,l.shadowColor=s,l.shadowDistance=a,l.align=u,l}return o(e,t),e.prototype.update=function(t){},e.prototype.render=function(t){this.text.length<=0||(t.save(),t.font=this.pxSize+"px "+this.font,t.textAlign=this.align,t.textBaseline="middle",t.translate(this.position.left,this.position.top),this.shadowColor&&this.shadowDistance&&(t.translate(this.shadowDistance.left,this.shadowDistance.top),t.fillStyle=this.shadowColor.toString(),t.fillText(this.text,0,0),t.translate(-this.shadowDistance.left,-this.shadowDistance.top)),t.fillStyle="rgba("+this.color.r+", "+this.color.g+", "+this.color.b+", "+this.color.a+")",t.fillText(this.text,0,0),t.restore())},e.prototype.measureWidth=function(t){t.save(),t.font=this.pxSize+"px "+this.font;var e=t.measureText(this.text).width;return t.restore(),e},e.Builder=function(){function t(){}return t.prototype.build=function(){var t,n,i,o,r,s;return new e(null!==(t=this.text)&&void 0!==t?t:"",null!==(n=this.font)&&void 0!==n?n:c.default.FONT_DEFAULT,null!==(i=this.pxSize)&&void 0!==i?i:10,null!==(o=this.color)&&void 0!==o?o:new d.Color(0,0,0),null!==(r=this.position)&&void 0!==r?r:new d.Position(0,0),this.shadowColor,this.shadowDistance,null!==(s=this.align)&&void 0!==s?s:l.START)},t.prototype.setText=function(t){return this.text=t,this},t.prototype.setFont=function(t){return this.font=t,this},t.prototype.setSize=function(t){return this.pxSize=t,this},t.prototype.setShadowColor=function(t,e,n,i){return void 0===i&&(i=1),this.shadowColor=new d.Color(t,e,n,i),this},t.prototype.setShadowDistance=function(t,e){return this.shadowDistance=new d.Position(t,e),this},t.prototype.setColor=function(t,e,n,i){return void 0===i&&(i=1),this.color=new d.Color(t,e,n,i),this},t.prototype.setPosition=function(t,e){return this.position=new d.Position(t,e),this},t.prototype.setAlign=function(t){return this.align=t,this},t}(),e}(d.default);e.default=p,function(t){t.START="start",t.END="end",t.CENTER="center"}(l=e.TextAlign||(e.TextAlign={}))},209:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(169)),c=a(n(165)),d=function(t){function e(e,n,i,o,r,s,a,u,l){var c=t.call(this)||this;return c.position=e,c.color=n,c.duration=i,c.interval=o,c.remainInterval=0,c.speed=r,c.minRadius=s,c.maxRadius=a,c.radianAngle=u,c.radianAngleVariance=l,c.running=!1,c.particles=[],c}return o(e,t),e.prototype.update=function(t){this.running&&--this.remainInterval<0&&(this.remainInterval=this.interval,this.particles.push(new p(new c.Position(this.position.left,this.position.top),this.getRandomVelocity(),new c.Color(this.color.r,this.color.g,this.color.b,this.color.a),this.duration,this.minRadius,this.maxRadius))),this.particles.forEach((function(e){return e.update(t)})),this.particles=this.particles.filter((function(t){return!t.invalidated}))},e.prototype.render=function(t){this.particles.forEach((function(e){return e.render(t)}))},e.prototype.start=function(){this.running=!0},e.prototype.stop=function(){this.running=!1,this.remainInterval=0},e.prototype.getRandomVelocity=function(){var t=this.radianAngle+l.default.random(-this.radianAngleVariance,this.radianAngleVariance),e=Math.sin(t)*this.speed,n=-Math.cos(t)*this.speed;return new c.Position(e,n)},e.Builder=function(){function t(){}return t.prototype.build=function(){var t,n,i,o,r,s,a,u,l;return new e(null!==(t=this.position)&&void 0!==t?t:new c.Position(0,0),null!==(n=this.color)&&void 0!==n?n:new c.Color(0,0,0),null!==(i=this.duration)&&void 0!==i?i:60,null!==(o=this.interval)&&void 0!==o?o:5,null!==(r=this.speed)&&void 0!==r?r:5,null!==(s=this.minRadius)&&void 0!==s?s:5,null!==(a=this.maxRadius)&&void 0!==a?a:5,null!==(u=this.radianAngle)&&void 0!==u?u:0,null!==(l=this.radianAngleVariance)&&void 0!==l?l:Math.PI)},t.prototype.setPosition=function(t,e){return this.position=new c.Position(t,e),this},t.prototype.setColor=function(t,e,n,i){return void 0===i&&(i=1),this.color=new c.Color(t,e,n,i),this},t.prototype.setDuration=function(t){return this.duration=t,this},t.prototype.setInterval=function(t){return this.interval=t,this},t.prototype.setSpeed=function(t){return this.speed=t,this},t.prototype.setRadius=function(t,e){return this.minRadius=t,this.maxRadius=e,this},t.prototype.setAngle=function(t,e){return this.radianAngle=l.default.toRadian(t),this.radianAngleVariance=l.default.toRadian(e),this},t}(),e}(c.default);e.default=d;var p=function(t){function e(e,n,i,o,r,s){var a=t.call(this)||this;return a.position=e,a.velocity=n,a.color=i,a.duration=o,a.remainDuration=o,a.minRadius=r,a.maxRadius=s,a}return o(e,t),e.prototype.update=function(t){--this.remainDuration<0?this.invalidate():(this.position.left+=this.velocity.left,this.position.top+=this.velocity.top)},e.prototype.render=function(t){t.save(),t.translate(this.position.left,this.position.top),t.fillStyle=this.color.toString(),t.beginPath(),t.arc(0,0,this.currentRadius(),0,2*Math.PI),t.fill(),t.restore()},e.prototype.currentRadius=function(){return this.minRadius+(this.maxRadius-this.minRadius)*(this.remainDuration/this.duration)},e}(c.default)},57:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=a(n(165)),c=u(n(603)),d=u(n(169)),p=function(t){function e(e,n,i,o,r){var s=t.call(this)||this;return s.size=e,s.color=n,s.position=i,s.origin=o,s.radianAngle=r,s}return o(e,t),e.prototype.update=function(t){},e.prototype.render=function(t){t.save(),t.translate(this.position.left,this.position.top),t.rotate(this.radianAngle),t.fillStyle="rgba("+this.color.r+", "+this.color.g+", "+this.color.b+", "+this.color.a+")",t.fillRect(-this.origin.left,-this.origin.top,this.size.width,this.size.height),t.restore()},e.Builder=function(){function t(){this.originCenter=!1}return t.prototype.build=function(){var t,n,i,o;return this.size||(this.size=new l.Size(0,0)),this.originCenter&&(this.origin=new l.Position(this.size.width/2,this.size.height/2)),new e(this.size,null!==(t=this.color)&&void 0!==t?t:new l.Color(0,0,0),null!==(n=this.position)&&void 0!==n?n:new l.Position(0,0),null!==(i=this.origin)&&void 0!==i?i:new l.Position(0,0),null!==(o=this.radianAngle)&&void 0!==o?o:0)},t.prototype.setSize=function(t,e){return this.size=new l.Size(t,e),this},t.prototype.setSizeFullscreen=function(){return this.size=new l.Size(c.default.VIEWPORT_WIDTH,c.default.VIEWPORT_HEIGHT),this},t.prototype.setColor=function(t,e,n,i){return void 0===i&&(i=1),this.color=new l.Color(t,e,n,i),this},t.prototype.setPosition=function(t,e){return this.position=new l.Position(t,e),this},t.prototype.setOrigin=function(t,e){return this.originCenter=!1,this.origin=new l.Position(t,e),this},t.prototype.setOriginCenter=function(){return this.originCenter=!0,this},t.prototype.setAngle=function(t){return this.radianAngle=d.default.toRadian(t),this},t}(),e}(l.default);e.default=p},844:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(169)),c=a(n(165)),d=function(t){function e(e,n,i,o,r,s,a){var u=t.call(this)||this;return u.image=e,u.size=n,u.color=i,u.position=o,u.origin=r,u.radianAngle=s,u.frames=a,u._currentFrameIndex=0,u.currentFramePhase=0,u}return o(e,t),Object.defineProperty(e.prototype,"currentFrameIndex",{get:function(){return this._currentFrameIndex},set:function(t){this._currentFrameIndex=t%this.frames.length,this.currentFramePhase=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this.frames[this.currentFrameIndex]},enumerable:!1,configurable:!0}),e.prototype.update=function(t){this.currentFrame.duration>0&&this.updateFrame()},e.prototype.render=function(t){this.image&&(this.color.a<=0||(t.save(),t.translate(this.position.left,this.position.top),t.rotate(this.radianAngle),t.globalAlpha=this.color.a,t.drawImage(this.image,this.currentFrame.position.left,this.currentFrame.position.top,this.currentFrame.size.width,this.currentFrame.size.height,-this.origin.left,-this.origin.top,this.size.width,this.size.height),t.restore()))},e.prototype.updateFrame=function(){this.currentFramePhase++>=this.currentFrame.duration&&(this.currentFramePhase=0,this.currentFrameIndex+=1,this.currentFrameIndex%=this.frames.length)},e.Builder=function(){function t(){this.originCenter=!1,this.frames=[]}return t.prototype.build=function(){var t,n,i,o,r,s,a,u,l,d;return this.frames.length<=0&&this.frames.push(new p(new c.Position(0,0),new c.Size(null!==(n=null===(t=this.image)||void 0===t?void 0:t.width)&&void 0!==n?n:0,null!==(o=null===(i=this.image)||void 0===i?void 0:i.height)&&void 0!==o?o:0),0)),this.size||(this.size=new c.Size(null!==(r=this.frames[0].size.width)&&void 0!==r?r:0,null!==(s=this.frames[0].size.height)&&void 0!==s?s:0)),this.originCenter&&(this.origin=new c.Position(this.size.width/2,this.size.height/2)),new e(this.image,this.size,null!==(a=this.color)&&void 0!==a?a:new c.Color(0,0,0,1),null!==(u=this.position)&&void 0!==u?u:new c.Position(0,0),null!==(l=this.origin)&&void 0!==l?l:new c.Position(0,0),null!==(d=this.radianAngle)&&void 0!==d?d:0,this.frames)},t.prototype.setImage=function(t){return this.image=t,this},t.prototype.setSize=function(t,e){return this.size=new c.Size(t,e),this},t.prototype.setColor=function(t,e,n,i){return void 0===i&&(i=1),this.color=new c.Color(t,e,n,i),this},t.prototype.setPosition=function(t,e){return this.position=new c.Position(t,e),this},t.prototype.setOrigin=function(t,e){return this.originCenter=!1,this.origin=new c.Position(t,e),this},t.prototype.setOriginCenter=function(){return this.originCenter=!0,this},t.prototype.setAngle=function(t){return this.radianAngle=l.default.toRadian(t),this},t.prototype.addFrame=function(t,e,n,i,o){return void 0===o&&(o=0),this.frames.push(new p(new c.Position(t,e),new c.Size(n,i),o)),this},t}(),e}(c.default);e.default=d;var p=function(t,e,n){this.position=t,this.size=e,this.duration=n}},249:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(603)),a=function(t){function e(e,n){var i=t.call(this)||this;return i.position=e,i.radius=n,i}return o(e,t),e.prototype.render=function(t){s.default.DEBUG&&this.renderBoundingCircle(t)},e.prototype.isCollide=function(t){if(this.invalidated||t.invalidated)return!1;var e=this.position.left-t.position.left,n=this.position.top-t.position.top;return Math.pow(e,2)+Math.pow(n,2)<=Math.pow(this.radius+t.radius,2)},e.prototype.renderBoundingCircle=function(t){t.save(),t.translate(this.position.left,this.position.top),t.strokeStyle="red",t.lineWidth=2,t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI),t.stroke(),t.restore()},e}(r(n(165)).default);e.default=a},727:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(603)),c=n(165),d=a(n(984)),p=a(n(805)),f=function(){function t(t){this.level=this.getLevel(t)}return t.prototype.createBodies=function(t,e){return this.level.createBodies(t,e)},t.prototype.createEnemyHeads=function(t,e){return this.level.createEnemyHeads(t,e)},t.prototype.getLevel=function(t){switch(t){case 1:return new y;case 2:return new _;case 3:return new v;case 4:return new g;case 5:return new m;case 6:return new b;case 7:return new w;case 8:return new S;case 9:return new O;case 10:return new P;default:throw t+" is not defined"}},t.LEVEL_MAX=10,t}();e.default=f;var h=function(){function t(){}return t.prototype.createBodies=function(e,n){var i=this;return this.getRandomHorizontalPositions(this.BODYS.length).map((function(o,r){return new p.default(new c.Position(o,t.SEA_BODY_TOP),i.BODYS[r],e,n)}))},t.prototype.getRandomHorizontalPositions=function(e){for(var n=new Array,i=t.HORIZONTAL_SEGMENT_LENGTH;i<=l.default.VIEWPORT_WIDTH-t.HORIZONTAL_SEGMENT_LENGTH;i+=t.HORIZONTAL_SEGMENT_LENGTH)n.push(i);return n.sort((function(){return Math.random()-.5})).slice(0,e)},t.HORIZONTAL_SEGMENT_LENGTH=140,t.SEA_BODY_TOP=l.default.VIEWPORT_HEIGHT-100,t}(),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array},e}(h),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA,p.BodyType.VON],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(1500,1e3),d.HeadType.VON,t,e))},e}(h),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA,p.BodyType.FEEL],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(1700,200),d.HeadType.VON,t,e),new d.default(new c.Position(900,1100),d.HeadType.FEEL,t,e))},e}(h),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(300,1300),d.HeadType.FEEL,t,e),new d.default(new c.Position(700,700),d.HeadType.VON,t,e),new d.default(new c.Position(1600,500),d.HeadType.GI,t,e))},e}(h),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA,p.BodyType.FEEL,p.BodyType.GI],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(300,1300),d.HeadType.FEEL,t,e),new d.default(new c.Position(1800,700),d.HeadType.GI,t,e))},e}(h),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA,p.BodyType.FEEL,p.BodyType.VON],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(1600,1300),d.HeadType.VON,t,e),new d.default(new c.Position(200,1200),d.HeadType.EDITOR,t,e))},e}(h),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA,p.BodyType.VON,p.BodyType.GI],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(200,600),d.HeadType.FEEL,t,e),new d.default(new c.Position(900,700),d.HeadType.VON,t,e),new d.default(new c.Position(1600,1100),d.HeadType.EDITOR,t,e))},e}(h),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA,p.BodyType.FEEL,p.BodyType.GI],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(1800,300),d.HeadType.VON,t,e),new d.default(new c.Position(900,1200),d.HeadType.EDITOR,t,e),new d.default(new c.Position(400,1300),d.HeadType.GI,t,e))},e}(h),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA,p.BodyType.FEEL,p.BodyType.VON,p.BodyType.GI],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(1e3,800),d.HeadType.FEEL,t,e),new d.default(new c.Position(1900,700),d.HeadType.EDITOR,t,e),new d.default(new c.Position(100,700),d.HeadType.GI,t,e))},e}(h),P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BODYS=[p.BodyType.SEA,p.BodyType.FEEL,p.BodyType.VON,p.BodyType.GI],e}return o(e,t),e.prototype.createEnemyHeads=function(t,e){return new Array(new d.default(new c.Position(400,400),d.HeadType.FEEL,t,e),new d.default(new c.Position(700,400),d.HeadType.VON,t,e),new d.default(new c.Position(400,1100),d.HeadType.GI,t,e),new d.default(new c.Position(1650,1200),d.HeadType.EDITOR,t,e))},e}(h)},186:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(433)),a=r(n(844)),u=function(t){function e(e,n,i,o){var r,u=t.call(this,e,45)||this;return u.position=e,u.listener=o,u.player=i,u.bodySprite=(new a.default.Builder).setOriginCenter().setImage(null===(r=s.default.global)||void 0===r?void 0:r.getImage("enemy_body")).addFrame(0,0,121,114,0).addFrame(121,0,121,114,0).addFrame(242,0,121,114,0).build(),u.bodySprite.currentFrameIndex=u.convertBodyTypeToSpriteIndex(n),u}return o(e,t),e.prototype.update=function(t){this.isCollide(this.player)&&this.listener.onEnemyCollision()},e.prototype.render=function(e){e.save(),e.translate(this.position.left,this.position.top),this.bodySprite.render(e),e.restore(),t.prototype.render.call(this,e)},e.prototype.convertBodyTypeToSpriteIndex=function(t){return t-1},e.SPRITE_INDEX_FEEL=0,e.SPRITE_INDEX_VON=1,e.SPRITE_INDEX_GI=2,e}(r(n(249)).default);e.default=u},984:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HeadType=void 0;var s,a=r(n(603)),u=r(n(433)),l=r(n(169)),c=n(165),d=r(n(844)),p=function(t){function e(e,n,i,o){var r,s=t.call(this,e,50)||this;return s.position=e,s.velocity=s.getRandomVelocity(n),s.radianAngle=l.default.random(0,2*Math.PI),s.radianAngleVelocity=l.default.random(-.05,.05),s.listener=o,s.player=i,s.headSprite=(new d.default.Builder).setOriginCenter().setImage(null===(r=u.default.global)||void 0===r?void 0:r.getImage("enemy_head")).addFrame(0,0,247,247,0).addFrame(247,0,247,247,0).addFrame(494,0,247,247,0).addFrame(741,0,247,247,0).build(),s.headSprite.currentFrameIndex=s.convertHeadTypeToSpriteIndex(n),s}return o(e,t),e.prototype.update=function(t){this.position.left+=this.velocity.left+a.default.VIEWPORT_WIDTH,this.position.left%=a.default.VIEWPORT_WIDTH,this.position.top+=this.velocity.top,(this.position.top-this.radius<=0||this.position.top+this.radius>=a.default.VIEWPORT_HEIGHT)&&(this.velocity.top=-this.velocity.top),this.radianAngle+=this.radianAngleVelocity,this.radianAngle%=2*Math.PI,this.isCollide(this.player)&&this.listener.onEnemyCollision()},e.prototype.render=function(e){var n=this;[0,-a.default.VIEWPORT_WIDTH,+a.default.VIEWPORT_WIDTH].forEach((function(t){e.save(),e.translate(n.position.left+t,n.position.top),e.rotate(n.radianAngle),n.headSprite.render(e),e.restore()})),t.prototype.render.call(this,e)},e.prototype.getRandomVelocity=function(t){var e=this.getSpeed(t),n=l.default.random(0,2*Math.PI),i=Math.sin(n)*e,o=Math.cos(n)*e;return new c.Position(i,o)},e.prototype.getSpeed=function(t){switch(t){case s.FEEL:return 5;case s.VON:return 2;case s.GI:return 7;case s.EDITOR:return 10}},e.prototype.convertHeadTypeToSpriteIndex=function(t){return t},e}(r(n(249)).default);e.default=p,function(t){t[t.FEEL=0]="FEEL",t[t.VON=1]="VON",t[t.GI=2]="GI",t[t.EDITOR=3]="EDITOR"}(s=e.HeadType||(e.HeadType={}))},805:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BodyType=void 0;var s,a=r(n(433)),u=r(n(116)),l=r(n(844)),c=function(t){function e(e,n,i,o){var r,u,c,d,p,f=t.call(this,e,n===s.SEA?40:120)||this;return f.position=e,f.listener=o,f.player=i,f.runVelocity=0,f.type=n,f.armLSprite=(new l.default.Builder).setImage(null===(r=a.default.global)||void 0===r?void 0:r.getImage("sea_arm_l")).setOrigin(36,8).setPosition(-17,-34).build(),f.armRSprite=(new l.default.Builder).setImage(null===(u=a.default.global)||void 0===u?void 0:u.getImage("sea_arm_r")).setOrigin(9,9).setPosition(15,-33).build(),f.legLSprite=(new l.default.Builder).setImage(null===(c=a.default.global)||void 0===c?void 0:c.getImage("sea_leg_l")).setOrigin(14,9).setPosition(-17,29).build(),f.legRSprite=(new l.default.Builder).setImage(null===(d=a.default.global)||void 0===d?void 0:d.getImage("sea_leg_r")).setOrigin(10,10).setPosition(15,29).build(),f.bodySprite=(new l.default.Builder).setImage(null===(p=a.default.global)||void 0===p?void 0:p.getImage("sea_body")).setOrigin(46,3).setPosition(0,-40).build(),f}return o(e,t),e.prototype.update=function(t){this.isCollide(this.player)&&(this.type===s.SEA?this.listener.onDocking(this):(this.playAudio(),this.listener.onNearFakeBody(this)))},e.prototype.render=function(e){e.save(),e.translate(this.position.left,this.position.top),[this.armLSprite,this.armRSprite,this.legLSprite,this.legRSprite,this.bodySprite].forEach((function(t){return t.render(e)})),e.restore(),t.prototype.render.call(this,e)},e.prototype.playAudio=function(){var t;(new u.default.Builder).setBuffer(null===(t=a.default.global)||void 0===t?void 0:t.getAudio("fake_"+this.convertBodyTypeToAudioIndex(this.type))).build().play()},e.prototype.convertBodyTypeToAudioIndex=function(t){return t-1},e}(r(n(249)).default);e.default=c,function(t){t[t.SEA=0]="SEA",t[t.FEEL=1]="FEEL",t[t.VON=2]="VON",t[t.GI=3]="GI"}(s=e.BodyType||(e.BodyType={}))},330:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(603)),c=u(n(433)),d=u(n(116)),p=u(n(169)),f=n(165),h=a(n(246)),y=u(n(844)),_=function(t){function e(e,n,i,o){var r,s,a,u,l=t.call(this,i,50)||this;return l.position=i,l.velocity=new f.Position(0,0),l.particle=o,l.radianAngle=0,l.radianAngleVelocity=0,l.airResistance=.997,l.gravity=.09,l.fuelUpEfficiency=.4,l.fuelAngleEfficiency=.002,l.angleInstability=2e-4,l.angleGravityRate=1.008,l.playerStatus=e,l.criteria=n,l.headSprite=(new y.default.Builder).setOriginCenter().setImage(null===(r=c.default.global)||void 0===r?void 0:r.getImage("sea_head")).setPosition(0,0).addFrame(0,0,212,176,0).addFrame(212,0,212,176,0).addFrame(424,0,212,176,0).build(),l.fireSprite=(new y.default.Builder).setImage(null===(s=c.default.global)||void 0===s?void 0:s.getImage("sea_fire")).setColor(0,0,0,0).setOrigin(19,6).setPosition(0,55).build(),l.arrowSprite=(new y.default.Builder).setOriginCenter().setImage(null===(a=c.default.global)||void 0===a?void 0:a.getImage("sea_arrow")).setPosition(0,250).build(),l.arrowLabel=(new h.default.Builder).setAlign(h.TextAlign.CENTER).setColor(0,0,0).setSize(70).setPosition(0,330).build(),l.boostSound=(new d.default.Builder).setBuffer(null===(u=c.default.global)||void 0===u?void 0:u.getAudio("boost")).setLoop(!0).build(),l}return o(e,t),e.prototype.update=function(t){this.handleBoost(t),this.updateVelocity(),this.applyVelocity(),this.playerStatus.fuel<=0&&this.setExhausted()},e.prototype.render=function(e){var n=this;[0,-l.default.VIEWPORT_WIDTH,+l.default.VIEWPORT_WIDTH].forEach((function(t){e.save(),e.translate(n.position.left+t,n.position.top),e.rotate(n.radianAngle),n.fireSprite.render(e),n.headSprite.render(e),e.restore()})),this.position.top<0&&(this.arrowLabel.text=Math.floor(-this.position.top/50)+"m",this.arrowLabel.position.left=this.arrowSprite.position.left=this.position.left,this.arrowLabel.render(e),this.arrowSprite.render(e)),t.prototype.render.call(this,e)},e.prototype.invalidate=function(){t.prototype.invalidate.call(this),this.boostSound.stop(),this.particle.stop()},e.prototype.setSuccess=function(){this.headSprite.currentFrameIndex=0,this.fireSprite.color.a=0,this.boostSound.stop(),this.particle.stop()},e.prototype.setExhausted=function(){this.headSprite.currentFrameIndex=2,this.fireSprite.color.a=0,this.boostSound.stop(),this.particle.stop()},e.prototype.normalizeAngle=function(t){return t>+Math.PI?t-2*Math.PI:t<-Math.PI?t+2*Math.PI:t},e.prototype.updateVelocity=function(){this.velocity.top+=this.gravity,this.velocity.left*=this.airResistance,this.velocity.top*=this.airResistance,this.radianAngleVelocity*=this.airResistance},e.prototype.applyVelocity=function(){this.position.left+=this.velocity.left+l.default.VIEWPORT_WIDTH,this.position.left%=l.default.VIEWPORT_WIDTH,this.position.top+=this.velocity.top,this.radianAngle+=this.radianAngleVelocity,this.radianAngle=this.normalizeAngle(this.radianAngle)},e.prototype.handleBoost=function(t){var e=this.boostUp(t),n=this.boostAngle(t);this.fireSprite.color.a=e?1:0,e?(this.boostSound.play(),this.generateParticle()):(this.boostSound.stop(),this.particle.stop()),this.headSprite.currentFrameIndex=e||n?1:this.criteria.check()?0:2},e.prototype.boostUp=function(t){if(!t.isPressed(0))return!1;if(this.playerStatus.fuel<=0)return!1;var e=+Math.sin(this.radianAngle),n=-Math.cos(this.radianAngle);return this.velocity.left+=e*this.fuelUpEfficiency,this.velocity.top+=n*this.fuelUpEfficiency,this.radianAngleVelocity+=p.default.random(-this.angleInstability,+this.angleInstability),this.radianAngle*=this.angleGravityRate,this.playerStatus.fuel-=1,!0},e.prototype.boostAngle=function(t){if(t.isPressed(1)==t.isPressed(2))return!1;if(this.playerStatus.fuel<=0)return!1;var e=(t.isPressed(1)?-this.fuelAngleEfficiency:0)+(t.isPressed(2)?+this.fuelAngleEfficiency:0);return this.radianAngleVelocity+=e,this.playerStatus.fuel-=1,!0},e.prototype.generateParticle=function(){var t=this.radianAngle+Math.PI;this.particle.position.left=this.position.left+80*Math.sin(t),this.particle.position.top=this.position.top-80*Math.cos(t),this.particle.radianAngle=t,this.particle.start()},e}(u(n(249)).default);e.default=_},101:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(433)),a=r(n(169)),u=r(n(165)),l=r(n(844)),c=function(t){function e(e){var n,i=t.call(this)||this;return i.position=e,i.duration=120,i.remainDuration=i.duration,i.speed=6,i.distance=0,i.particleSprite=(new l.default.Builder).setOriginCenter().setImage(null===(n=s.default.global)||void 0===n?void 0:n.getImage("crash")).setPosition(0,0).addFrame(0,0,150,150,7).addFrame(150,0,150,150,7).addFrame(300,0,150,150,7).addFrame(450,0,150,150,7).build(),i}return o(e,t),e.prototype.update=function(t){this.particleSprite.update(t),this.particleSprite.color.a=this.remainDuration/this.duration,this.distance+=this.speed,--this.remainDuration<=0&&this.invalidate()},e.prototype.render=function(t){t.save(),t.translate(this.position.left,this.position.top);for(var e=0;e<360;e+=45)t.save(),t.rotate(a.default.toRadian(e)),t.translate(this.distance,0),this.particleSprite.render(t),t.translate(this.distance,0),this.particleSprite.render(t),t.restore();t.restore()},e}(u.default);e.default=c},732:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(433)),a=r(n(169)),u=r(n(165)),l=r(n(844)),c=function(t){function e(e){var n,i=t.call(this)||this;return i.position=e,i.duration=120,i.remainDuration=i.duration,i.speed=3,i.distance=5,i.particleSprite=(new l.default.Builder).setOriginCenter().setImage(null===(n=s.default.global)||void 0===n?void 0:n.getImage("fog")).build(),i}return o(e,t),e.prototype.update=function(t){this.particleSprite.color.a=this.remainDuration/this.duration,this.particleSprite.size.width*=1.0015,this.particleSprite.size.height*=1.0015,this.distance+=this.speed,this.speed*=.95,--this.remainDuration<=0&&this.invalidate()},e.prototype.render=function(t){t.save(),t.translate(this.position.left,this.position.top);for(var e=15;e<360;e+=55)t.save(),t.rotate(a.default.toRadian(e)),t.translate(this.distance,0),this.particleSprite.render(t),t.restore();t.restore()},e}(u.default);e.default=c},455:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(4)),a=r(n(169)),u=function(t){function e(e){var n=t.call(this)||this;return n.position=e,n.duration=60,n.lineStart=300,n.lineLength=450,n.point1=new l(.6*n.duration,.95*n.duration,s.default.easeInOutCubic),n.point2=new l(0,.9*n.duration,s.default.easeInOutCubic),n.elapsedDuration=0,n}return o(e,t),e.prototype.update=function(t){++this.elapsedDuration>this.duration&&this.invalidate()},e.prototype.render=function(t){t.save(),t.translate(this.position.left,this.position.top),t.strokeStyle="rgba(255, 255, 0, 0.7)",t.lineWidth=50,t.lineCap="round",t.beginPath();for(var e=0;e<360;e+=45)t.save(),t.rotate(a.default.toRadian(e)),t.moveTo(this.lineStart+this.point1.get(this.elapsedDuration)*this.lineLength,0),t.lineTo(this.lineStart+this.point2.get(this.elapsedDuration)*this.lineLength,0),t.stroke(),t.restore();t.closePath(),t.restore()},e}(r(n(165)).default);e.default=u;var l=function(){function t(t,e,n){this.begin=t,this.duration=e-t,this.ease=n}return t.prototype.get=function(t){return this.ease(a.default.fitIn((t-this.begin)/this.duration,0,1))},t}()},939:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DockingCriteria=void 0;var l=u(n(603)),c=u(n(32)),d=u(n(433)),p=n(905),f=u(n(488)),h=u(n(169)),y=u(n(101)),_=u(n(330)),v=u(n(455)),g=n(165),m=u(n(844)),b=u(n(269)),w=u(n(691)),S=u(n(600)),O=u(n(846)),P=u(n(655)),T=u(n(929)),E=a(n(197)),I=u(n(186)),A=u(n(732)),j=u(n(727)),C=u(n(116)),R=u(n(209)),D=u(n(222)),B=function(t){function e(e,n){var i,o,r=t.call(this,e,n)||this;return r.resource=d.default.global,r.playerStatus=new c.default,r.dockingCriteria=new L,r.status=0,r.bgSprite=(new m.default.Builder).setPosition(0,0).setImage(r.resource.getImage("room")).setSize(l.default.VIEWPORT_WIDTH,l.default.VIEWPORT_HEIGHT).build(),r.lifeUi=new O.default(new g.Position(10,10),r.playerStatus),r.fuelUi=new w.default(new g.Position(450,10),r.playerStatus),r.dockingUi=new b.default(new g.Position(700,15),r.dockingCriteria),r.levelUi=new P.default(new g.Position(1170,15),(new m.default.Builder).setImage(null===(i=d.default.global)||void 0===i?void 0:i.getImage("carrot")).build()),r.scoreUi=new P.default(new g.Position(1400,15),(new m.default.Builder).setImage(null===(o=d.default.global)||void 0===o?void 0:o.getImage("coin")).build()),r.seaHeadParticle=(new R.default.Builder).setAngle(0,20).setColor(255,199,0).setSpeed(5).setInterval(3).setRadius(0,20).setDuration(50).build(),r.actors=new Array,r.effectEntities=new Array,r}return o(e,t),e.prototype.onDocking=function(t){this.dockingCriteria.log(),this.dockingCriteria.check()?this.onSuccess(t):this.crash()},e.prototype.onNearFakeBody=function(t){t.invalidate(),this.effectEntities.push(new A.default(t.position)),this.actors.push(new I.default(new g.Position(t.position.left,e.GROUND_TOP-45),t.type,this.seaHead,this))},e.prototype.onEnemyCollision=function(){this.crash()},e.prototype.onSuccessScreenClosed=function(){this.playerStatus.level>=j.default.LEVEL_MAX?this.onGameOver():(this.playerStatus.level++,this.initGame())},e.prototype.onGameOverScreenClosed=function(){var t=new E.Bundle;t.set("score",this.playerStatus.score),this.changeScene(E.SceneId.TITLE,t)},e.prototype.start=function(){f.default.info("Start InGameScene"),this.initGame()},e.prototype.initGame=function(){var t;D.default.getInstance().fadeVolume(D.default.VOLUME_INGAME,2),this.status=0,this.resultScreen=void 0,this.playerStatus.fuel=c.default.FUEL_FULL,this.levelUi.number=this.playerStatus.level,this.scoreUi.number=this.playerStatus.score,null===(t=this.seaHead)||void 0===t||t.invalidate(),this.seaHead=new _.default(this.playerStatus,this.dockingCriteria,new g.Position(l.default.VIEWPORT_WIDTH/2,400),this.seaHeadParticle);var e=new j.default(this.playerStatus.level);this.actors=(new Array).concat(e.createBodies(this.seaHead,this),e.createEnemyHeads(this.seaHead,this))},e.prototype.update=function(e){var n,i;t.prototype.update.call(this,e),this.effectEntities.forEach((function(t){return t.update(e)})),this.effectEntities=this.effectEntities.filter((function(t){return!t.invalidated})),this.seaHeadParticle.update(e),this.lifeUi.update(e),this.fuelUi.update(e),this.dockingUi.update(e),this.levelUi.update(e),this.scoreUi.update(e),0===this.status?(null===(n=this.seaHead)||void 0===n||n.update(e),this.actors.forEach((function(t){return t.update(e)})),this.actors=this.actors.filter((function(t){return!t.invalidated})),this.dockingCriteria.update(this.seaHead),this.isHeadOnGround()&&this.crash()):1===this.status&&(null===(i=this.resultScreen)||void 0===i||i.update(e))},e.prototype.render=function(t){var n,i;this.bgSprite.render(t),this.actors.forEach((function(e){return e.render(t)})),this.seaHeadParticle.render(t),null===(n=this.seaHead)||void 0===n||n.render(t),this.effectEntities.forEach((function(e){return e.render(t)})),this.lifeUi.render(t),this.fuelUi.render(t),this.dockingUi.render(t),this.levelUi.render(t),this.scoreUi.render(t),null===(i=this.resultScreen)||void 0===i||i.render(t),l.default.DEBUG&&(t.save(),t.strokeStyle="red",t.lineWidth=2,t.beginPath(),t.moveTo(0,e.GROUND_TOP),t.lineTo(l.default.VIEWPORT_WIDTH,e.GROUND_TOP),t.stroke(),t.closePath(),t.restore())},e.prototype.isHeadOnGround=function(){return!!this.seaHead&&this.seaHead.position.top+this.seaHead.radius>=e.GROUND_TOP},e.prototype.crash=function(){var t,e;(new C.default.Builder).setBuffer(null===(t=d.default.global)||void 0===t?void 0:t.getAudio("crash_"+h.default.randomInt(0,5))).build().play(),this.effectEntities.push(new y.default(this.seaHead.position)),this.playerStatus.life--,null===(e=this.seaHead)||void 0===e||e.invalidate(),this.seaHead=void 0,f.default.info("Crashed, "+this.playerStatus.life+" life remains"),this.playerStatus.life<=0?this.onGameOver():this.initGame()},e.prototype.onSuccess=function(t){var e;this.status=1,D.default.getInstance().fadeVolume(D.default.VOLUME_QUIET,2),this.effectEntities.push(new v.default(this.seaHead.position)),this.seaHead.setSuccess();var n=new p.ScoreCalculator(this.playerStatus.fuel,this.seaHead.position.left-t.position.left,this.seaHead.radianAngle);this.resultScreen=new T.default(n,this),this.playerStatus.score+=n.totalScore,(new C.default.Builder).setBuffer(null===(e=d.default.global)||void 0===e?void 0:e.getAudio("success_"+h.default.randomInt(0,5))).build().play()},e.prototype.onGameOver=function(){var t;this.status=1,D.default.getInstance().fadeVolume(D.default.VOLUME_QUIET,2),this.resultScreen=new S.default(this.playerStatus.score,this),p.Score.setScore(this.playerStatus.score),(new C.default.Builder).setBuffer(null===(t=d.default.global)||void 0===t?void 0:t.getAudio("gameover")).build().play()},e.GROUND_TOP=l.default.VIEWPORT_HEIGHT-60,e}(E.default);e.default=B;var L=function(){function t(){this.horizontalVelocity=this.verticalVelocity=this.angleVelocity=this.angle=!0}return t.prototype.check=function(){return this.horizontalVelocity&&this.verticalVelocity&&this.angleVelocity&&this.angle},t.prototype.update=function(t){t&&(this.horizontalVelocity=h.default.isBetween(t.velocity.left,-3.5,3.5),this.verticalVelocity=h.default.isBetween(t.velocity.top,-4.5,4.2),this.angleVelocity=h.default.isBetween(t.radianAngleVelocity,-.025,.025),this.angle=h.default.isBetween(t.radianAngle,-.35,.35))},t.prototype.log=function(){f.default.log("Docking criteria"),f.default.log("- hV: "+this.horizontalVelocity),f.default.log("- vV: "+this.verticalVelocity),f.default.log("- aV: "+this.angleVelocity),f.default.log("- angle: "+this.angle)},t}();e.DockingCriteria=L},96:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(603)),c=u(n(433)),d=n(856),p=u(n(116)),f=u(n(488)),h=u(n(57)),y=u(n(844)),_=a(n(197)),v=function(t){function e(e,n){var i,o,r=t.call(this,e,n)||this;return r.bgRect=(new h.default.Builder).setSizeFullscreen().setColor(255,255,255).setPosition(0,0).build(),r.logoSprite=(new y.default.Builder).setImage(null===(i=c.default.global)||void 0===i?void 0:i.getImage("logo")).setColor(0,0,0,0).setOriginCenter().setPosition(l.default.VIEWPORT_WIDTH/2,l.default.VIEWPORT_HEIGHT/2).build(),r.logoSound=(new p.default.Builder).setBuffer(null===(o=c.default.global)||void 0===o?void 0:o.getAudio("logo")).build(),r}return o(e,t),e.prototype.start=function(){f.default.info("Start IntroScene"),this.showLogo()},e.prototype.render=function(t){this.bgRect.render(t),this.logoSprite.render(t)},e.prototype.showLogo=function(){var t=this;this.pushScript((function(){return new d.CommonScript.Wait(50)})),this.pushScript((function(){return new d.CommonScript.Fade(t.logoSprite,1,30)})),this.pushScript((function(){return new d.CommonScript.Run((function(){t.logoSound.play()}))})),this.pushScript((function(){return new d.CommonScript.Wait(90)})),this.pushScript((function(){return new d.CommonScript.Fade(t.logoSprite,0,30)})),this.pushScript((function(){return new d.CommonScript.Run((function(){t.changeScene(_.SceneId.TITLE)}))}))},e}(_.default);e.default=v},75:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(603)),c=u(n(433)),d=n(856),p=u(n(488)),f=u(n(57)),h=u(n(844)),y=a(n(197)),_=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.bgRect=(new f.default.Builder).setSizeFullscreen().setColor(255,255,255).setPosition(0,0).build(),i}return o(e,t),e.prototype.start=function(){var t=this;p.default.info("Start LoadScene"),(new c.default.Loader).setImage("loading","sprite/loading.png").load().then((function(e){return t.onResourceLoad(e)}))},e.prototype.render=function(t){var e;this.bgRect.render(t),null===(e=this.loadingSprite)||void 0===e||e.render(t)},e.prototype.onResourceLoad=function(t){var e=this;p.default.info("LoadScene is loaded"),this.loadingSprite=(new h.default.Builder).setImage(t.getImage("loading")).setPosition(l.default.VIEWPORT_WIDTH-478-10,l.default.VIEWPORT_HEIGHT-112-10).build(),this.loadEntireGameResource().then((function(t){p.default.info("Resources are loaded"),c.default.global=t,e.pushScript((function(){return new d.CommonScript.Fade(e.loadingSprite,0,10)})),e.pushScript((function(){return new d.CommonScript.Run((function(){e.changeScene(y.SceneId.INTRO)}))}))}))},e.prototype.loadEntireGameResource=function(){return(new c.default.Loader).setFont("NeoDgm").setImage("logo","sprite/logo.png").setImage("title_bg","sprite/title_bg.png").setImage("title_head","sprite/title_head.png").setImage("room","sprite/room.png").setImage("life","sprite/life.png").setImage("fuel","sprite/fuel.png").setImage("docking","sprite/docking.png").setImage("carrot","sprite/carrot.png").setImage("coin","sprite/coin.png").setImage("crash","sprite/crash.png").setImage("fog","sprite/fog.png").setImage("sea_arm_l","sprite/sea_arm_l.png").setImage("sea_arm_r","sprite/sea_arm_r.png").setImage("sea_leg_l","sprite/sea_leg_l.png").setImage("sea_leg_r","sprite/sea_leg_r.png").setImage("sea_body","sprite/sea_body.png").setImage("sea_head","sprite/sea_head.png").setImage("sea_fire","sprite/sea_fire.png").setImage("sea_arrow","sprite/sea_arrow.png").setImage("enemy_head","sprite/enemy_head.png").setImage("enemy_body","sprite/enemy_body.png").setAudio("bgm","bgm/PerituneMaterial_Laid_Back3_loop.m4a").setAudio("logo","sound/logo.wav").setAudio("sleep_0","sound/sleep_0.wav").setAudio("sleep_1","sound/sleep_1.wav").setAudio("sleep_2","sound/sleep_2.wav").setAudio("sleep_3","sound/sleep_3.wav").setAudio("start_0","sound/start_0.wav").setAudio("start_1","sound/start_1.wav").setAudio("start_2","sound/start_2.wav").setAudio("start_3","sound/start_3.wav").setAudio("boost","sound/boost.wav").setAudio("crash_0","sound/crash_0.wav").setAudio("crash_1","sound/crash_1.wav").setAudio("crash_2","sound/crash_2.wav").setAudio("crash_3","sound/crash_3.wav").setAudio("crash_4","sound/crash_4.wav").setAudio("fake_0","sound/fake_0.wav").setAudio("fake_1","sound/fake_1.wav").setAudio("fake_2","sound/fake_2.wav").setAudio("success_0","sound/success_0.wav").setAudio("success_1","sound/success_1.wav").setAudio("success_2","sound/success_2.wav").setAudio("success_3","sound/success_3.wav").setAudio("success_4","sound/success_4.wav").setAudio("gameover","sound/gameover.wav").load()},e}(y.default);e.default=_},197:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Bundle=e.SceneId=void 0;var s,a=r(n(165)),u=r(n(348));(s=e.SceneId||(e.SceneId={}))[s.LOAD=0]="LOAD",s[s.INTRO=1]="INTRO",s[s.TITLE=2]="TITLE",s[s.INGAME=3]="INGAME";var l=function(t){function e(e,n){var i=t.call(this)||this;return i.sceneManager=e,i.bundle=null!=n?n:new c,i.scriptRunner=new u.default,i}return o(e,t),e.prototype.update=function(t){this.scriptRunner.update(t)},e.prototype.pushScript=function(t){this.scriptRunner.push(t)},e.prototype.getFromBundle=function(t){return this.bundle.get(t)},e.prototype.changeScene=function(t,e){this.sceneManager.changeScene(t,e)},e}(a.default);e.default=l;var c=function(){function t(){this.bundle=new Map}return t.prototype.set=function(t,e){this.bundle.set(t,e)},t.prototype.get=function(t){return this.bundle.get(t)},t}();e.Bundle=c},105:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(939)),r=i(n(96)),s=i(n(75)),a=n(197),u=i(n(369)),l=function(){function t(){}return t.getScene=function(t,e,n){switch(t){case a.SceneId.LOAD:return new s.default(e,n);case a.SceneId.INTRO:return new r.default(e,n);case a.SceneId.TITLE:return new u.default(e,n);case a.SceneId.INGAME:return new o.default(e,n);default:throw"Scene "+t+" is invalid"}},t}();e.default=l},369:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(603)),c=u(n(433)),d=n(905),p=n(856),f=u(n(116)),h=u(n(222)),y=u(n(488)),_=u(n(169)),v=n(165),g=a(n(246)),m=u(n(57)),b=u(n(844)),w=a(n(197)),S=function(t){function e(e,n){var i,o,r,s=t.call(this,e,n)||this;s.isWaitingInput=!1,s.sleepRemainDuration=_.default.randomInt(20,60)*l.default.FPS,s.fadeRect=(new m.default.Builder).setSizeFullscreen().setColor(255,255,255,1).build(),s.bgSprite=(new b.default.Builder).setImage(null===(i=c.default.global)||void 0===i?void 0:i.getImage("title_bg")).build(),s.headSprite=(new b.default.Builder).setImage(null===(o=c.default.global)||void 0===o?void 0:o.getImage("title_head")).setPosition(582,-40).build(),s.titleLabel=(new g.default.Builder).setAlign(g.TextAlign.START).setColor(230,80,255,1).setPosition(140,280).setShadowColor(0,0,0,.6).setShadowDistance(20,20).setText("세아랜더").setSize(290).build(),s.scoreLabels=new Array(d.Score.COUNT);for(var a=0;a<d.Score.COUNT;a++)s.scoreLabels[a]=(new g.default.Builder).setAlign(g.TextAlign.START).setPosition(190,590+110*a).setSize(80).build();return s.promptLabel=(new g.default.Builder).setAlign(g.TextAlign.CENTER).setColor(0,0,0,0).setText("엔터 키를 누르면 시작합니다").setSize(70).setPosition(l.default.VIEWPORT_WIDTH/2,.85*l.default.VIEWPORT_HEIGHT).build(),s.startAudio=(new f.default.Builder).setBuffer(null===(r=c.default.global)||void 0===r?void 0:r.getAudio("start_"+_.default.randomInt(0,4))).build(),s.headTransitionScript=new p.CommonScript.WaveTransition(s.headSprite,0,40,240,p.CommonScript.WaveTransition.LOOP_INFINITE),s}return o(e,t),e.prototype.start=function(){var t=this;y.default.info("Start TitleScene"),this.pushScript((function(){return new p.CommonScript.Fade(t.fadeRect,0,30)})),this.pushScript((function(){return new p.CommonScript.Run((function(){var e;h.default.getInstance().play(null===(e=c.default.global)||void 0===e?void 0:e.getAudio("bgm")),h.default.getInstance().fadeVolume(h.default.VOLUME_DEFAULT,2),t.promptLabel.color.a=1,t.promptBlinkScript=new p.CommonScript.Blink(t.promptLabel,60),t.isWaitingInput=!0}))})),this.showScoreBoard()},e.prototype.update=function(e){var n;t.prototype.update.call(this,e),null===(n=this.promptBlinkScript)||void 0===n||n.update(),this.headTransitionScript.update(),this.isWaitingInput&&this.waitOkKey(e),this.handleSleepVoice()},e.prototype.render=function(t){this.bgSprite.render(t),this.headSprite.render(t),this.titleLabel.render(t),this.scoreLabels.forEach((function(e){return e.render(t)})),this.promptLabel.render(t),this.fadeRect.render(t)},e.prototype.waitOkKey=function(t){var e=this;t.isPressed(3)&&(this.startAudio.play(),this.isWaitingInput=!1,this.promptLabel.color.a=0,this.pushScript((function(){return new p.CommonScript.Wait(80)})),this.pushScript((function(){return new p.CommonScript.Run((function(){e.changeScene(w.SceneId.INGAME)}))})))},e.prototype.showScoreBoard=function(){var t,e=d.Score.getScores(),n=null!==(t=this.getFromBundle("score"))&&void 0!==t?t:-1,i=e.lastIndexOf(n);y.default.log("Latest score: "+n),this.scoreLabels.forEach((function(t,n){t.color=n==i?new v.Color(255,0,0):new v.Color(0,0,0),t.text=n+1+"위  "+e[n]+"점"}))},e.prototype.handleSleepVoice=function(){var t;this.sleepRemainDuration<0||(this.sleepRemainDuration--,0===this.sleepRemainDuration&&(new f.default.Builder).setBuffer(null===(t=c.default.global)||void 0===t?void 0:t.getAudio("sleep_"+_.default.randomInt(0,4))).build().play())},e}(w.default);e.default=S},269:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(433)),c=a(n(165)),d=u(n(57)),p=u(n(844)),f=function(t){function e(e,n){var i,o=t.call(this)||this;return o.position=e,o.criteria=n,o.greenColor=new c.Color(0,255,0),o.redColor=new c.Color(255,0,0),o.panelRects=[(new d.default.Builder).setPosition(90,20).setSize(60,60).build(),(new d.default.Builder).setPosition(160,20).setSize(60,60).build(),(new d.default.Builder).setPosition(240,20).setSize(60,60).build(),(new d.default.Builder).setPosition(320,20).setSize(80,60).build()],o.frontSprite=(new p.default.Builder).setImage(null===(i=l.default.global)||void 0===i?void 0:i.getImage("docking")).build(),o}return o(e,t),e.prototype.update=function(t){var e=this;[this.criteria.verticalVelocity,this.criteria.horizontalVelocity,this.criteria.angleVelocity,this.criteria.angle].forEach((function(t,n){e.panelRects[n].color=t?e.greenColor:e.redColor}))},e.prototype.render=function(t){t.save(),t.translate(this.position.left,this.position.top),this.panelRects.forEach((function(e){return e.render(t)})),this.frontSprite.render(t),t.restore()},e}(c.default);e.default=f},691:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(32)),a=r(n(433)),u=r(n(169)),l=r(n(165)),c=r(n(844)),d=function(t){function e(e,n){var i,o,r,s=t.call(this)||this;return s.position=e,s.playerStatus=n,s.backSprite=(new c.default.Builder).setImage(null===(i=a.default.global)||void 0===i?void 0:i.getImage("fuel")).addFrame(408,0,204,113).build(),s.arrowSprite=(new c.default.Builder).setImage(null===(o=a.default.global)||void 0===o?void 0:o.getImage("fuel")).setOrigin(102,100).setPosition(102,100).addFrame(204,0,204,113).build(),s.frontSprite=(new c.default.Builder).setImage(null===(r=a.default.global)||void 0===r?void 0:r.getImage("fuel")).addFrame(0,0,204,113).build(),s}return o(e,t),e.prototype.update=function(t){this.arrowSprite.radianAngle=this.getArrowAngle(this.playerStatus.fuel/s.default.FUEL_FULL)},e.prototype.render=function(t){t.save(),t.translate(this.position.left,this.position.top),this.backSprite.render(t),this.arrowSprite.render(t),this.frontSprite.render(t),t.restore()},e.prototype.getArrowAngle=function(t){return u.default.toRadian(80+-160*(1-t))},e}(l.default);e.default=d},600:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(603)),c=n(856),d=u(n(348)),p=u(n(165)),f=a(n(246)),h=u(n(57)),y=function(t){function e(e,n){var i=t.call(this)||this;return i.listener=n,i.scriptRunner=new d.default,i.bgRect=(new h.default.Builder).setSizeFullscreen().setColor(0,0,0,.15).build(),i.fadeRect=(new h.default.Builder).setSizeFullscreen().setColor(255,255,255,0).build(),i.titleLabel=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.3*l.default.VIEWPORT_HEIGHT).setSize(230).setColor(70,0,130).setShadowColor(0,0,0,.3).setShadowDistance(10,10).setText("게임 끝").build(),i.scoreLabel=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.49*l.default.VIEWPORT_HEIGHT).setSize(120).setColor(0,0,0,0).setText("최종 점수: "+e).build(),i.promptLabel=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.65*l.default.VIEWPORT_HEIGHT).setSize(70).setColor(0,0,0,0).setText("엔터 키를 누르면 처음으로 돌아갑니다...").build(),i.currentUpdate=i.updatePreScore,i}return o(e,t),e.prototype.update=function(t){var e;this.scriptRunner.update(t),null===(e=this.currentUpdate)||void 0===e||e.call(this,t)},e.prototype.render=function(t){this.bgRect.render(t),this.titleLabel.render(t),this.scoreLabel.render(t),this.promptLabel.render(t),this.fadeRect.render(t)},e.prototype.updatePreScore=function(t){var e=this;this.currentUpdate=void 0,this.scriptRunner.push((function(){return new c.CommonScript.Wait(50)})),this.scriptRunner.push((function(){return new c.CommonScript.Run((function(){e.scoreLabel.color.a=1}))})),this.scriptRunner.push((function(){return new c.CommonScript.Wait(40)})),this.scriptRunner.push((function(){return new c.CommonScript.Run((function(){e.promptLabel.color.a=1,e.promptBlinkScript=new c.CommonScript.Blink(e.promptLabel,60),e.currentUpdate=e.updatePrompt}))}))},e.prototype.updatePrompt=function(t){var e;null===(e=this.promptBlinkScript)||void 0===e||e.update(),t.isPressed(3)&&(this.promptLabel.color.a=0,this.currentUpdate=this.updateFadeOut)},e.prototype.updateFadeOut=function(t){var e=this;this.currentUpdate=void 0,this.scriptRunner.push((function(){return new c.CommonScript.Fade(e.fadeRect,1,50)})),this.scriptRunner.push((function(){return new c.CommonScript.Wait(30)})),this.scriptRunner.push((function(){return new c.CommonScript.Run((function(){e.listener.onGameOverScreenClosed()}))}))},e}(p.default);e.default=y},846:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(32)),a=r(n(433)),u=r(n(165)),l=r(n(844)),c=function(t){function e(e,n){var i,o,r,s=t.call(this)||this;return s.position=e,s.playerStatus=n,s.displayingLife=n.life,s.eachWidth=130,s.padding=5,s.livingSprite=(new l.default.Builder).setImage(null===(i=a.default.global)||void 0===i?void 0:i.getImage("life")).addFrame(0,0,130,111).build(),s.fallingSprite=(new l.default.Builder).setImage(null===(o=a.default.global)||void 0===o?void 0:o.getImage("life")).addFrame(130,0,130,111).build(),s.fogSprite=(new l.default.Builder).setImage(null===(r=a.default.global)||void 0===r?void 0:r.getImage("life")).addFrame(260,0,130,111).setColor(0,0,0,0).build(),s}return o(e,t),e.prototype.update=function(t){this.livingSprite.update(t),this.displayingLife>this.playerStatus.life&&this.showFog(this.displayingLife-1),this.displayingLife=this.playerStatus.life,this.fogSprite.color.a>0&&(this.fogSprite.position.top-=.7,this.fogSprite.color.a-=.02)},e.prototype.render=function(t){t.save(),t.translate(this.position.left,this.position.top);for(var e=0;e<this.playerStatus.life;e++)this.livingSprite.position.left=(this.padding+this.eachWidth)*e,this.livingSprite.render(t);for(;e<s.default.LIFE_FULL;e++)this.fallingSprite.position.left=(this.padding+this.eachWidth)*e,this.fallingSprite.render(t);this.fogSprite.render(t),t.restore()},e.prototype.showFog=function(t){this.fogSprite.position.top=0,this.fogSprite.position.left=(this.padding+this.eachWidth)*t,this.fogSprite.color.a=1},e}(u.default);e.default=c},655:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(165)),c=a(n(246)),d=function(t){function e(e,n){var i=t.call(this)||this;return i.position=e,i.iconSprite=n,i.numberLabel=(new c.default.Builder).setAlign(c.TextAlign.START).setSize(100).setPosition(n?n.size.width+20:0,55).build(),i}return o(e,t),Object.defineProperty(e.prototype,"number",{set:function(t){this.numberLabel.text=""+t},enumerable:!1,configurable:!0}),e.prototype.update=function(t){},e.prototype.render=function(t){var e;t.save(),t.translate(this.position.left,this.position.top),null===(e=this.iconSprite)||void 0===e||e.render(t),this.numberLabel.render(t),t.restore()},e}(l.default);e.default=d},929:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=u(n(603)),c=n(856),d=u(n(348)),p=u(n(165)),f=a(n(246)),h=function(t){function e(e,n){var i=t.call(this)||this;return i.listener=n,i.scoreDuration=0,i.scoreElapsedDuration=0,i.score=e,i.scriptRunner=new d.default,i.titleLabel=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.22*l.default.VIEWPORT_HEIGHT).setSize(230).setColor(110,30,170).setShadowColor(0,0,0,.3).setShadowDistance(10,10).setText("성공!").build(),i.score1Label=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.37*l.default.VIEWPORT_HEIGHT).setSize(90).setColor(0,0,0,0).build(),i.score2Label=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.45*l.default.VIEWPORT_HEIGHT).setSize(90).setColor(0,0,0,0).build(),i.score3Label=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.53*l.default.VIEWPORT_HEIGHT).setSize(90).setColor(0,0,0,0).build(),i.scoreLabel=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.62*l.default.VIEWPORT_HEIGHT).setSize(120).setColor(0,0,0,0).setText("총 "+i.score.totalScore+" 점").build(),i.promptLabel=(new f.default.Builder).setAlign(f.TextAlign.CENTER).setPosition(l.default.VIEWPORT_WIDTH/2,.75*l.default.VIEWPORT_HEIGHT).setSize(70).setColor(0,0,0,0).setText("엔터 키를 누르면 계속합니다...").build(),i.currentUpdate=i.updatePreScore1,i}return o(e,t),e.prototype.update=function(t){var e;this.scriptRunner.update(t),null===(e=this.currentUpdate)||void 0===e||e.call(this,t)},e.prototype.render=function(t){this.titleLabel.render(t),this.score1Label.render(t),this.score2Label.render(t),this.score3Label.render(t),this.scoreLabel.render(t),this.promptLabel.render(t)},e.prototype.updatePreScore1=function(t){var e=this;this.currentUpdate=void 0,this.scriptRunner.push((function(){return new c.CommonScript.Wait(80)})),this.scriptRunner.push((function(){return new c.CommonScript.Run((function(){e.scoreDuration=e.score.fuelScore<=0?1:Math.min(30,e.score.fuelScore),e.scoreElapsedDuration=0,e.score1Label.color.a=1,e.currentUpdate=e.updateScore1}))}))},e.prototype.updateScore1=function(t){this.scoreElapsedDuration++;var e=Math.floor(this.score.fuelScore*(this.scoreElapsedDuration/this.scoreDuration));this.score1Label.text="연료: "+e,this.scoreElapsedDuration>=this.scoreDuration&&(this.currentUpdate=this.updatePreScore2)},e.prototype.updatePreScore2=function(t){var e=this;this.currentUpdate=void 0,this.scriptRunner.push((function(){return new c.CommonScript.Wait(20)})),this.scriptRunner.push((function(){return new c.CommonScript.Run((function(){e.scoreDuration=e.score.positionScore<=0?1:Math.min(30,e.score.positionScore),e.scoreElapsedDuration=0,e.score2Label.color.a=1,e.currentUpdate=e.updateScore2}))}))},e.prototype.updateScore2=function(t){this.scoreElapsedDuration++;var e=Math.floor(this.score.positionScore*(this.scoreElapsedDuration/this.scoreDuration));this.score2Label.text="위치: "+e,this.scoreElapsedDuration>=this.scoreDuration&&(this.currentUpdate=this.updatePreScore3)},e.prototype.updatePreScore3=function(t){var e=this;this.currentUpdate=void 0,this.scriptRunner.push((function(){return new c.CommonScript.Wait(20)})),this.scriptRunner.push((function(){return new c.CommonScript.Run((function(){e.scoreDuration=e.score.angleScore<=0?1:Math.min(30,e.score.angleScore),e.scoreElapsedDuration=0,e.score3Label.color.a=1,e.currentUpdate=e.updateScore3}))}))},e.prototype.updateScore3=function(t){this.scoreElapsedDuration++;var e=Math.floor(this.score.angleScore*(this.scoreElapsedDuration/this.scoreDuration));this.score3Label.text="각도: "+e,this.scoreElapsedDuration>=this.scoreDuration&&(this.currentUpdate=this.updateScore)},e.prototype.updateScore=function(t){var e=this;this.currentUpdate=void 0,this.scriptRunner.push((function(){return new c.CommonScript.Wait(45)})),this.scriptRunner.push((function(){return new c.CommonScript.Run((function(){e.scoreLabel.color.a=1,e.currentUpdate=e.updatePrePrompt}))}))},e.prototype.updatePrePrompt=function(t){var e=this;this.currentUpdate=void 0,this.scriptRunner.push((function(){return new c.CommonScript.Wait(50)})),this.scriptRunner.push((function(){return new c.CommonScript.Run((function(){e.promptLabel.color.a=1,e.promptBlinkScript=new c.CommonScript.Blink(e.promptLabel,60),e.currentUpdate=e.updatePrompt}))}))},e.prototype.updatePrompt=function(t){var e;null===(e=this.promptBlinkScript)||void 0===e||e.update(),t.isPressed(3)&&(this.promptLabel.color.a=0,this.listener.onSuccessScreenClosed())},e}(p.default);e.default=h},603:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.FPS=60,t.VIEWPORT_WIDTH=2048,t.VIEWPORT_HEIGHT=1536,t.FONT_DEFAULT="NeoDgm",t.DEBUG=!1,t}();e.default=n},611:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(603)),r=i(n(203)),s=n(366),a=n(197),u=i(n(105)),l=i(n(711)),c=function(){function t(t){this.interval=1e3/o.default.FPS,this.screen=new d(t),this.keyListener=new s.KeyListener,this.keyboardInput=new r.default(this.keyListener),this.touchKeyInput=new l.default(this.keyListener),this.lastUpdateTimestamp=0}return t.prototype.changeScene=function(t,e){this.currentScene=u.default.getScene(t,this,e),this.currentScene.start()},t.prototype.start=function(){window.requestAnimationFrame(this.loop.bind(this)),this.keyboardInput.registerEventListener(),this.touchKeyInput.registerEventListener(),this.changeScene(a.SceneId.LOAD)},t.prototype.loop=function(t){for(var e,n,i=t-this.lastUpdateTimestamp,o=Math.floor(i/this.interval),r=0;r<o;r++)null===(e=this.currentScene)||void 0===e||e.update(this.keyListener.keyStatus);o>0&&(null===(n=this.currentScene)||void 0===n||n.render(this.screen.context)),this.lastUpdateTimestamp=t-i%this.interval,window.requestAnimationFrame(this.loop.bind(this))},t}();e.default=c;var d=function(){function t(t){this.canvas=t;var e=t.getContext("2d");if(!e)throw"2D canvas context is not available";this.context=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},enumerable:!1,configurable:!0}),t}()},32:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.level=1,this.score=0,this.life=t.LIFE_FULL,this.fuel=t.FUEL_FULL}return t.LIFE_FULL=3,t.FUEL_FULL=600,t}();e.default=n},433:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{u(i.next(t))}catch(t){r(t)}}function a(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=r(n(116)),a=r(n(488)),u=window.location.href+"/res/",l=function(){function t(){this.images=new Map,this.audios=new Map}return t.prototype.getImage=function(t){return this.getResource(t,this.images)},t.prototype.getAudio=function(t){return this.getResource(t,this.audios)},t.prototype.getResource=function(t,e){var n=e.get(t);return n||a.default.error(t+" not found"),n},t.prototype.setImage=function(t,e){this.images.set(t,e)},t.prototype.setAudio=function(t,e){this.audios.set(t,e)},t.Loader=function(){function e(){this.resourcesToLoad=new Array,this.resource=new t}return e.prototype.load=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Promise.all(this.resourcesToLoad)];case 1:return t.sent(),[2,this.resource]}}))}))},e.prototype.setImage=function(t,e){var n=this;return this.resourcesToLoad.push(new Promise((function(i){var o=new Image;o.onload=function(){n.resource.setImage(t,o),i()},o.onerror=function(){a.default.error("Image load error: "+e),i()},o.src=u+e}))),this},e.prototype.setAudio=function(t,e){var n=this;return this.resourcesToLoad.push(fetch(u+e).then((function(t){return t.arrayBuffer()})).then((function(t){return s.default.context.decodeAudioData(t)})).then((function(e){n.resource.setAudio(t,e)})).catch((function(){a.default.error("Audio load error: "+e)}))),this},e.prototype.setFont=function(t){return this.resourcesToLoad.push(document.fonts.load("12pt "+t)),this},e}(),t}();e.default=l},905:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Score=e.ScoreCalculator=void 0;var o=i(n(488)),r=function(){function t(t,e,n){this.fuelScore=t,this.positionScore=Math.floor(500*Math.pow(2,-Math.abs(e/15))),this.angleScore=Math.floor(500*Math.pow(2,-Math.abs(5*n))),o.default.log("Score calculated"),o.default.log("- fuel: "+t+" -> "+this.fuelScore),o.default.log("- position: "+e+" -> "+this.positionScore),o.default.log("- angle: "+n+" -> "+this.angleScore)}return Object.defineProperty(t.prototype,"totalScore",{get:function(){return this.fuelScore+this.positionScore+this.angleScore},enumerable:!1,configurable:!0}),t}();e.ScoreCalculator=r;var s=function(){function t(){}return t.getScores=function(){var e=this.load();return e.concat(new Array(t.COUNT-e.length).fill(0))},t.setScore=function(e){var n=t.load();n.push(e);var i=n.sort((function(t,e){return e-t}));t.save(i.slice(0,t.COUNT))},t.clear=function(){localStorage.removeItem(t.KEY)},t.save=function(e){var n=JSON.stringify(e);o.default.log("Save: "+n),localStorage.setItem(t.KEY,n)},t.load=function(){var e=localStorage.getItem(t.KEY);return o.default.log("Load: "+e),e?JSON.parse(e):new Array(0)},t.COUNT=5,t.KEY="scores",t}();e.Score=s},366:function(t,e){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStatus=e.KeyListener=void 0;var o=function(){function t(){this._keyStatus=new s}return Object.defineProperty(t.prototype,"keyStatus",{get:function(){return this._keyStatus},enumerable:!1,configurable:!0}),t.prototype.onKeyInput=function(t,e){this._keyStatus.setPressed(t,e)},t}();e.KeyListener=o;var r=function(){function t(){var t=this;this.status=new Map,[0,1,2,3].forEach((function(e){return t.status.set(e,!1)}))}return t.prototype.isPressed=function(t){var e;return null!==(e=this.status.get(t))&&void 0!==e&&e},t}();e.KeyStatus=r;var s=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.setPressed=function(t,e){this.status.has(t)&&this.status.set(t,e)},e}(r)},203:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.listener=t}return t.prototype.registerEventListener=function(){var t=this;window.addEventListener("keydown",(function(e){return t.handleKeyEvent(e)})),window.addEventListener("keyup",(function(e){return t.handleKeyEvent(e)}))},t.prototype.handleKeyEvent=function(t){var e=this.keyValueToEnum(t.key);void 0!==e&&(this.listener.onKeyInput(e,"keydown"===t.type),t.preventDefault())},t.prototype.keyValueToEnum=function(t){switch(t){case"ArrowUp":return 0;case"ArrowLeft":return 1;case"ArrowRight":return 2;case"Enter":return 3;default:return}},t}();e.default=n},711:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.listener=t}return t.prototype.registerEventListener=function(){for(var t=document.getElementsByClassName("touchKey"),e=0,n=Array.from(t);e<n.length;e++){var i=n[e];i instanceof HTMLElement&&(i.addEventListener("touchstart",this.onTouchStart.bind(this)),i.addEventListener("touchend",this.onTouchEnd.bind(this)))}var o=document.getElementById("enterKey");null==o||o.addEventListener("touchstart",this.onTouchStart.bind(this)),null==o||o.addEventListener("touchend",this.onTouchEnd.bind(this))},t.prototype.onTouchStart=function(t){this.onTouch(t,!0)},t.prototype.onTouchEnd=function(t){this.onTouch(t,!1)},t.prototype.onTouch=function(t,e){for(var n=0;n<t.changedTouches.length;n++){var i=t.changedTouches.item(n);if(null!==i){var o=i.target;o.style.backgroundColor=e?"rgba(200, 200, 200, 0.5)":"rgba(255, 255, 255, 0.5)";var r=o.getAttribute("key");if(null!==r){var s=this.keyAttributeToEnum(r);void 0!==s&&this.listener.onKeyInput(s,e)}}}t.preventDefault()},t.prototype.keyAttributeToEnum=function(t){switch(t){case"up":return 0;case"left":return 1;case"right":return 2;case"enter":return 3;default:return}},t}();e.default=n},519:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(603)),r=i(n(611)),s=i(n(116)),a=i(n(222)),u=i(n(488));function l(){var t,e;null===(t=document.getElementById("play"))||void 0===t||t.remove(),s.default.enableAutoPlay(),a.default.enableAutoPlay();var n=function(){var t=document.createElement("canvas");return t.id="enterKey",t.className="content",t.width=o.default.VIEWPORT_WIDTH,t.height=o.default.VIEWPORT_HEIGHT,t}();null===(e=document.getElementById("container"))||void 0===e||e.appendChild(n),new r.default(n).start()}window.onload=function(){var t;(t=document.getElementById("play"))?(t.addEventListener("click",l),t.addEventListener("touchstart",(function(t){var e=document.getElementById("touchKeyContainer");e&&(e.style.visibility="visible"),l(),t.preventDefault()}))):u.default.error("Play button element not found")}},856:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonScript=void 0;var s=n(165),a=r(n(114));!function(t){var e=function(t){function e(e){var n=t.call(this)||this;return n.remainDuration=e,n}return o(e,t),e.prototype.update=function(){--this.remainDuration<0&&this.finish()},e}(a.default);t.Wait=e;var n=function(t){function e(e){var n=t.call(this)||this;return n.functionToRun=e,n}return o(e,t),e.prototype.update=function(){this.functionToRun(),this.finish()},e}(a.default);t.Run=n;var i=function(t){function e(e,n,i){var o=t.call(this)||this;return o.entity=e,o.endAlpha=n,o.remainDuration=i,o.deltaAlpha=(n-e.color.a)/i,o}return o(e,t),e.prototype.update=function(){--this.remainDuration<0?(this.entity.color.a=this.endAlpha,this.finish()):this.entity.color.a+=this.deltaAlpha},e}(a.default);t.Fade=i;var r=function(t){function e(e,n,i,o){var r=t.call(this)||this;return r.entity=e,r.targetPosition=new s.Position(n,i),r.remainDuration=o,r.dx=(n-e.position.left)/o,r.dy=(i-e.position.top)/o,r}return o(e,t),e.prototype.update=function(){--this.remainDuration<0?(this.entity.position=this.targetPosition,this.finish()):(this.entity.position.left+=this.dx,this.entity.position.top+=this.dy)},e}(a.default);t.Transition=r;var u=function(t){function e(e,n,i,o,r){var a=t.call(this,-1===r)||this;return a.entity=e,a.xAmplitude=n,a.yAmplitude=i,a.cycle=o,a.remainLoop=r,a.remainCurrentCycle=o,a.initialPosition=new s.Position(e.position.left,e.position.top),a}return o(e,t),e.prototype.update=function(){if(this.remainCurrentCycle--,this.remainCurrentCycle<0)this.onThisCycleFinished();else{var t=Math.sin(this.remainCurrentCycle/this.cycle*Math.PI*2);this.entity.position.left=this.initialPosition.left+t*this.xAmplitude,this.entity.position.top=this.initialPosition.top+t*this.yAmplitude}},e.prototype.onThisCycleFinished=function(){this.remainCurrentCycle=this.cycle,this.remainLoop!==e.LOOP_INFINITE&&--this.remainLoop<=0&&(this.entity.position=this.initialPosition,this.finish())},e.LOOP_INFINITE=-1,e}(a.default);t.WaveTransition=u;var l=function(t){function e(e,n){var i=t.call(this,!0)||this;return i.entity=e,i.duration=n,i.remainDuration=n,i.initialAlpha=i.entity.color.a,i}return o(e,t),e.prototype.update=function(){--this.remainDuration<0&&(this.remainDuration=this.duration,this.entity.color.a=0===this.entity.color.a?this.initialAlpha:0)},e}(a.default);t.Blink=l}(e.CommonScript||(e.CommonScript={}))},114:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._finished=!1,this.isInfinite=null!=t&&t}return Object.defineProperty(t.prototype,"finished",{get:function(){return this._finished},enumerable:!1,configurable:!0}),t.prototype.finish=function(){this._finished=!0},t}();e.default=n},348:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.queue=new Array}return t.prototype.push=function(t){this.queue.push(t)},t.prototype.update=function(t){var e;this.currentScript?(this.currentScript.update(t),this.currentScript.finished&&(this.currentScript=void 0)):this.currentScript=null===(e=this.queue.shift())||void 0===e?void 0:e()},t}();e.default=n},116:function(t,e){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.enableAutoPlay=function(){var e=(new t.Builder).setBuffer(t.context.createBuffer(1,1,8e3)).build();e.play(),e.stop()},t.context=new(window.AudioContext||window.webkitAudioContext),t.Builder=function(){function t(){}return t.prototype.build=function(){var t;return this.buffer?new r(this.buffer,null!==(t=this.loop)&&void 0!==t&&t):new s},t.prototype.setBuffer=function(t){return this.buffer=t,this},t.prototype.setLoop=function(t){return this.loop=t,this},t}(),t}();e.default=o;var r=function(t){function e(e,n){var i=t.call(this)||this;return i.buffer=e,i.loop=n,i.playing=!1,i}return i(e,t),e.prototype.play=function(){this.playing||(this.playing=!0,this.node=this.createNode(this.buffer),this.node.loop=this.loop,this.node.start())},e.prototype.stop=function(){this.node&&this.playing&&(this.playing=!1,this.node.stop())},e.prototype.createNode=function(t){var e=o.context.createBufferSource();return e.buffer=t,e.connect(o.context.destination),e},e}(o),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.play=function(){},e.prototype.stop=function(){},e}(o)},222:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.gainNode=t.context.createGain(),this.gainNode.gain.setValueAtTime(1,0),this.playing=!1}return Object.defineProperty(t.prototype,"volume",{set:function(t){this.gainNode.gain.setValueAtTime(t,0)},enumerable:!1,configurable:!0}),t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.enableAutoPlay=function(){t.getInstance().play(t.context.createBuffer(1,1,8e3)),t.getInstance().stop()},t.prototype.play=function(e,n){e&&(this.playing||(this.playing=!0,this.volume=null!=n?n:t.VOLUME_DEFAULT,this.node=t.context.createBufferSource(),this.node.buffer=e,this.node.connect(this.gainNode),this.gainNode.connect(t.context.destination),this.node.loop=!0,this.node.start()))},t.prototype.stop=function(){this.node&&this.playing&&(this.playing=!1,this.node.stop())},t.prototype.fadeVolume=function(e,n){this.gainNode.gain.exponentialRampToValueAtTime(e,t.context.currentTime+n)},t.context=new(window.AudioContext||window.webkitAudioContext),t.VOLUME_DEFAULT=.25,t.VOLUME_INGAME=.2,t.VOLUME_QUIET=.05,t}();e.default=n},4:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={easeInOutCubic:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}}},488:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(603)),r=function(){};e.default={log:o.default.DEBUG?console.log:r,info:console.info,warn:console.warn,error:console.error,dir:o.default.DEBUG?console.dir:r,time:o.default.DEBUG?console.time:r,timeEnd:o.default.DEBUG?console.timeEnd:r}},169:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={random:function(t,e){return t+Math.random()*(e-t)},randomInt:function(t,e){return Math.floor(this.random(t,e))},fitIn:function(t,e,n){return Math.min(Math.max(e,t),n)},isBetween:function(t,e,n){return e<=t&&t<=n},toRadian:function(t){return t*Math.PI/180}}}},e={};!function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}(519)})();